# 线程和asio
## 线程安全
### 总的来说, 同时使用不同的对象是安全的, 但是同时使用同一个对象是不安全的, 然而, 像`io_context`这种类型提供了更强的保证，即可以安全地同时使用单个对象

## 线程池
### 多个线程可能会调用`io_context::run()`建立一个完成处理程序`(completion handlers)`被调用的线程池, 此方法也可以与`io_context::post()`一起使用，作为在线程池中执行任意计算任务的一种方式。

## 内置线程
### 这个库在特定平台的实现使用了一个或多个内置线程来模拟异步性,这些线程必须尽可能对库的用户不可见, 尤其是这些线程

* 不允许直接调用用户代码
* 必须阻止所有信号
   
### 此方法通过以下保证得到补充
* 异步完成处理程序将仅从当前正在调用io_context :: run（）的线程中调用
### 因此，库用户有责任创建和管理将通知发送到的所有线程
### 采用这种方法的原因包括
* 通过从一个单一线程调用`io_context::run()`, 用户的代码可以避免与同步相关的开发复杂性,例如, 库用户可以实现单线程的可伸缩服务器(从用户的角度来看)
* 库用户可能需要在线程开始之后,其他应用代码被执行之前短暂的执行初始化,例如，Microsoft COM的用户必须先调用CoInitializeEx，然后才能从该线程调用任何其他COM操作
* 库接口与用于线程创建和管理的接口分离，并允许在线程不可用的平台上实现